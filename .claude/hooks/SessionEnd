#!/bin/bash
# Hook to manually trigger when closing ClaudeCode CLI
# You can add this to your shell's exit trap or call it manually

MASCOT_URL="${MASCOT_URL:-http://localhost:3000}"
MASCOT_TOKEN="${MASCOT_TOKEN:-dev_token_change_me}"

curl -s -X POST "${MASCOT_URL}/api/hooks/event" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${MASCOT_TOKEN}" \
  -d "{\"event\":\"SessionEnd\",\"timestamp\":\"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"}" \
  > /dev/null 2>&1 &

exit 0
