#!/bin/bash
# Hook triggered when Claude Code is about to use a tool (thinking state)

MASCOT_URL="${MASCOT_URL:-http://localhost:3000}"
MASCOT_TOKEN="${MASCOT_TOKEN:-dev_token_change_me}"

curl -s -X POST "${MASCOT_URL}/api/hooks/event" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${MASCOT_TOKEN}" \
  -d "{\"event\":\"PreToolUse\",\"tool\":\"$TOOL_NAME\",\"timestamp\":\"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\"pid\":$PPID}" \
  > /dev/null 2>&1 &

exit 0
